<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <title>Gestion des Leads - Yeddir</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap" />
        <link rel="stylesheet" href="../style.css" />
    </head>
    <body>
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <img src="/image_video/yeddir-logo.svg" alt="Logo Yeddir" />
                </div>
                <!-- Bouton burger pour mobile -->
                <button class="burger-menu" id="burgerMenu" aria-label="Ouvrir le menu">☰</button>
                <nav class="nav-container" id="navContainer"></nav>
            </div>
            <!-- Menu mobile (populé dynamiquement) -->
            <div class="mobile-nav-menu" id="mobileNavMenu"></div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title" id="sidebarTitle">Automatisation de la force de vente</div>
                <div class="sidebar-subtitle">Navigation</div>
            </div>
            <nav class="sidebar-nav" id="sidebarNav">
                <!-- Sidebar items seront générés par JS -->
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <div class="container">
                <div class="detailed-hero">
                    <h1 class="detailed-title">Gestion des leads</h1>
                    <p class="detailed-subtitle">Centralisation et qualification automatique des prospects</p>
                </div>
                <div class="detailed-content">
                    <div class="detailed-section">
                        <h3>Vue d'ensemble</h3>
                        <p>
                            Centralisez et automatisez la qualification de vos prospects pour maximiser vos taux de
                            conversion et optimiser l'efficacité commerciale. Notre module de gestion des leads permet
                            de réunir toutes les informations sur vos prospects, d'appliquer des règles de scoring
                            intelligentes et d'assurer un suivi optimal du parcours client, de la première interaction à
                            la conversion.
                        </p>
                    </div>
                    <div class="detailed-media">
                        <img
                            src="/image_video/automatisation-des-vente/gestion_des_leads.svg"
                            alt="Gestion des leads"
                            class="detailed-image"
                        />
                    </div>
                    <div class="detailed-section">
                        <h3>Fonctionnalités clés</h3>
                        <div class="detailed-features-grid">
                            <div class="detailed-feature-card">
                                <h4>Scoring intelligent</h4>
                                <p>
                                    Algorithmes de notation basés sur le comportement, l'engagement et les données
                                    démographiques.
                                </p>
                            </div>
                            <div class="detailed-feature-card">
                                <h4>Attribution automatique</h4>
                                <p>
                                    Distribution intelligente des leads selon les critères géographiques, sectoriels et
                                    de compétences.
                                </p>
                            </div>
                            <div class="detailed-feature-card">
                                <h4>Qualification en temps réel</h4>
                                <p>
                                    Évaluation instantanée de la qualité des prospects dès leur entrée dans le système.
                                </p>
                            </div>
                            <div class="detailed-feature-card">
                                <h4>Parcours client tracé</h4>
                                <p>
                                    Suivi détaillé de chaque interaction depuis la première visite jusqu'à la
                                    conversion.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="detailed-section">
                        <h3>Bénéfices</h3>
                        <div class="detailed-features-grid">
                            <div class="detailed-feature-card">
                                <p>✓ Réduction du temps de qualification</p>
                            </div>
                            <div class="detailed-feature-card">
                                <p>✓ Amélioration du taux de conversion</p>
                            </div>
                            <div class="detailed-feature-card">
                                <p>✓ Optimisation de l'allocation des ressources</p>
                            </div>
                            <div class="detailed-feature-card">
                                <p>✓ Visibilité complète sur le pipeline</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <script>
            // NAVIGATION ET SIDEBAR - même logique que page principale
            // Structure simplifiée pour cette vue
            const mainFeatures = [
                {id: "automatisation", title: "Automatisation de la force de vente"},
                {id: "processus", title: "Processus de vente"},
                {id: "omnicanal", title: "Omnicanal"},
                {id: "analyses", title: "Analyse des ventes"},
                {id: "aidevente", title: "Aide à la vente"},
                {id: "performances", title: "Performances de vente"},
                {id: "ZIA", title: "ZIA"},
                {id: "personnalisation", title: "Personnalisation"},
                {id: "marketing", title: "Automatisation du marketing"},
                {id: "collaboration", title: "Collaboration en équipe"},
                {id: "mobile", title: "Applications mobiles"},
                {id: "plateforme", title: "Outils de développeur"},
            ];
            const subFeatures = [
                {id: "analyse-ventes", title: "Analyse des ventes"},
                {id: "applications-mobiles", title: "Applications mobiles"},
                {id: "gestion-comptes", title: "Gestion des comptes"},
                {id: "gestion-contacts", title: "Gestion des contacts"},
                {id: "gestion-leads", title: "Gestion des leads"},
                {id: "gestion-transactions", title: "Gestion des transactions"},
                {id: "macros", title: "Macros"},
                {id: "portails-partenaires", title: "Portails partenaires"},
                {id: "previsions", title: "Prévisions"},
                {id: "regles-affectation", title: "Règles d'affectation"},
                {id: "regles-workflow", title: "Règles de workflow"},
            ];

            function renderNav() {
                const navContainer = document.getElementById("navContainer");
                navContainer.innerHTML = "";

                mainFeatures.forEach((feature) => {
                    const navItem = document.createElement("div");
                    navItem.className = "nav-item";

                    const button = document.createElement("button");
                    button.className = "nav-button" + (feature.id === "automatisation" ? " active" : "");
                    button.textContent = feature.title;

                    // MODIFIÉ : Redirige vers index.html avec le paramètre feature
                    button.onclick = () => {
                        window.location.href = `/index.html?feature=${feature.id}`;
                    };

                    navItem.appendChild(button);

                    // Dropdown pour les sous-fonctionnalités de "automatisation"
                    if (feature.id === "automatisation") {
                        const dropdown = document.createElement("div");
                        dropdown.className = "dropdown-menu";

                        const dropdownTitle = document.createElement("h3");
                        dropdownTitle.className = "dropdown-title";
                        dropdownTitle.textContent = feature.title;
                        dropdown.appendChild(dropdownTitle);

                        subFeatures.forEach((sf) => {
                            const dropdownItem = document.createElement("div");
                            dropdownItem.className = "dropdown-item";
                            dropdownItem.textContent = sf.title;

                            // MODIFIÉ : Redirige vers index.html avec feature et section
                            dropdownItem.onclick = () => {
                                window.location.href = `/index.html?feature=${feature.id}&section=${sf.id}`;
                            };

                            dropdown.appendChild(dropdownItem);
                        });

                        navItem.appendChild(dropdown);

                        navItem.onmouseenter = () => dropdown.classList.add("show");
                        navItem.onmouseleave = () => dropdown.classList.remove("show");
                    }

                    navContainer.appendChild(navItem);
                });
            }
            // Dans fonctionnalites.html - Gestion du hash
            function parseHash() {
                const hash = window.location.hash.substring(1); // Retire le #

                if (!hash) return {feature: "automatisation", section: null};

                const parts = hash.split("-");
                return {
                    feature: parts[0] || "automatisation",
                    section: parts[1] || null,
                };
            }

            function init() {
                const {feature, section} = parseHash();

                if (featuresData[feature]) {
                    activeFeature = feature;
                }

                renderNavigation();
                renderContent();
                setupIntersectionObserver();

                if (section) {
                    setTimeout(() => {
                        scrollToSection(section);
                    }, 500);
                } else if (featuresData[activeFeature] && featuresData[activeFeature].subFeatures.length > 0) {
                    setTimeout(() => {
                        scrollToSection(featuresData[activeFeature].subFeatures[0].id);
                    }, 100);
                }
            }

            // Écouter les changements de hash
            window.addEventListener("hashchange", function () {
                const {feature, section} = parseHash();

                if (feature !== activeFeature) {
                    setActiveFeature(feature);
                }

                if (section) {
                    setTimeout(() => {
                        scrollToSection(section);
                    }, 100);
                }
            });
            // Génération de la sidebar
            function renderSidebar() {
                const sidebarNav = document.getElementById("sidebarNav");
                sidebarNav.innerHTML = "";
                subFeatures.forEach((sf) => {
                    const btn = document.createElement("button");
                    btn.className = "sidebar-item" + (sf.id === "gestion-leads" ? " active" : "");
                    btn.textContent = sf.title;
                    btn.onclick = () => (window.location.href = `${sf.id}.html`);
                    sidebarNav.appendChild(btn);
                });
            }
            // Navigation (adaptable selon votre intégration SPA/routing)
            function goToOverview(featureId) {
                if (featureId === "automatisation") {
                    window.location.href = "index.html"; // ou la page d'accueil principale
                } else {
                    // Redirige vers la page correspondante
                    alert(`Redirection vers la fonctionnalité "${featureId}"`);
                }
            }

            renderNav();
            renderSidebar();
            initSidebar();
        </script>
    </body>
</html>
